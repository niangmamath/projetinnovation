<%- include('partials/header') %>

<div class="bg-white shadow-md rounded-lg p-8 max-w-4xl mx-auto">
  <h2 class="text-3xl font-bold mb-6 text-center text-green-700">RAM Green Champions Leaderboard</h2>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border">
      <thead class="bg-gray-100">
        <tr>
          <th class="py-3 px-4 border-b text-left text-sm font-semibold text-gray-700">Rank</th>
          <th class="py-3 px-4 border-b text-left text-sm font-semibold text-gray-700">Champion</th>
          <th class="py-3 px-4 border-b text-center text-sm font-semibold text-gray-700">Badge</th>
          <th class="py-3 px-4 border-b text-right text-sm font-semibold text-gray-700">Green Points</th>
        </tr>
      </thead>
      <tbody>
        <% if (users && users.length > 0) { %>
          <% users.forEach((user, index) => { %>
            <tr class="hover:bg-gray-50 <% if (userId && user._id.toString() === userId.toString()) { %> bg-green-100 <% } %>">
              <td class="py-3 px-4 border-b font-bold text-lg text-gray-800"><%= index + 1 %></td>
              <td class="py-3 px-4 border-b font-semibold text-gray-800"><%= user.username %></td>
              <td class="py-3 px-4 border-b text-center">
                <% 
                  const badges = { Bronze: '#cd7f32', Silver: '#c0c0c0', Gold: '#ffd700', Platinum: '#e5e4e2' };
                %>
                <span class="font-semibold px-3 py-1 rounded-full text-sm" style="background-color:<%= badges[user.badge] || '#ffffff' %>;">
                  <%= user.badge %>
                </span>
              </td>
              <td class="py-3 px-4 border-b text-right font-bold text-xl text-green-600"><%= user.greenPoints %></td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="4" class="text-center py-8 text-gray-500">The leaderboard is empty. Book flights to become a champion!</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>

  <% if (userId) { %>
    <p class="text-center mt-4 text-sm text-gray-600">Your ranking is highlighted in green.</p>
  <% } %>

</div>

<%- include('partials/footer') %>
